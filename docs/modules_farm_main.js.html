<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding meta -->
    
      
        <meta name="author" content="Darren Smith" />
      
        <meta name="description" content="The Blackrock Application Server" />
      
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>modules/farm/main.js</title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-light.css">
    
<svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/>
                <path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/>
            </g>
        </symbol>
    </defs>
</svg>

</head>
<body>
<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html"><div class="text">Blackrock Application Server</div></a></h2><div class="search-box"><input type="text" placeholder="Search..." id="search-box" /><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-list-div"><ul><li><a href='#' class='' id='' target=''> </a></li><li><a href='#' class='' id='' target=''> </a></li><li><a href='#' class='' id='' target=''> </a></li><li><a href='#' class='' id='' target=''> </a></li><li><a href='#' class='' id='' target=''> </a></li><li><a href='https://blackrock.industryswarm.com' class='' id='' target='_blank'>Blackrock Homepage</a></li><li><a href='https://github.com/Industryswarm/isnode-blackrock' class='' id='' target='_blank'>Blackrock GitHub Repository</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-advanced-routing.html">Advanced Routing</a></li><li><a href="tutorial-app-filesystem-structure.html">App Filesystem Structure</a></li><li><a href="tutorial-getting-started.html">Getting Started</a></li><li><a href="tutorial-server-configuration.html">Server Configuration</a></li></ul><h3>Classes</h3><ul><li><a href="Server.Interfaces.Axon.html">Axon</a></li><li><a href="Server.Interfaces.HTTP.html">HTTP</a></li><li><a href="Server.Interfaces.HTTP.Client.html">Client</a><ul class='methods'><li data-type='method'><a href="Server.Interfaces.HTTP.Client.html#.delete">delete</a></li><li data-type='method'><a href="Server.Interfaces.HTTP.Client.html#.get">get</a></li><li data-type='method'><a href="Server.Interfaces.HTTP.Client.html#.post">post</a></li><li data-type='method'><a href="Server.Interfaces.HTTP.Client.html#.put">put</a></li><li data-type='method'><a href="Server.Interfaces.HTTP.Client.html#.request">request</a></li></ul></li><li><a href="Server.Interfaces.HTTP.Hook.html">Hook</a><ul class='methods'><li data-type='method'><a href="Server.Interfaces.HTTP.Hook.html#.add">add</a></li><li data-type='method'><a href="Server.Interfaces.HTTP.Hook.html#.remove">remove</a></li></ul></li><li><a href="Server.Interfaces.NanoMSG.html">NanoMSG</a></li><li><a href="Server.Interfaces.SSH.html">SSH</a></li><li><a href="Server.Interfaces.WebSockets.html">WebSockets</a></li><li><a href="Server.Interfaces.ZeroMQ.html">ZeroMQ</a></li><li><a href="Server.Modules.AppEngine.html">AppEngine</a><ul class='methods'><li data-type='method'><a href="Server.Modules.AppEngine.html#.appStats">appStats</a></li><li data-type='method'><a href="Server.Modules.AppEngine.html#.list">list</a></li><li data-type='method'><a href="Server.Modules.AppEngine.html#.load">load</a></li><li data-type='method'><a href="Server.Modules.AppEngine.html#.reloadApp">reloadApp</a></li><li data-type='method'><a href="Server.Modules.AppEngine.html#.search">search</a></li><li data-type='method'><a href="Server.Modules.AppEngine.html#.unloadApp">unloadApp</a></li></ul></li><li><a href="Server.Modules.AppEngine.app.html">app</a><ul class='methods'><li data-type='method'><a href="Server.Modules.AppEngine.app.html#.cfg">cfg</a></li><li data-type='method'><a href="Server.Modules.AppEngine.app.html#.loadController">loadController</a></li><li data-type='method'><a href="Server.Modules.AppEngine.app.html#.routes">routes</a></li><li data-type='method'><a href="Server.Modules.AppEngine.app.html#.unloadController">unloadController</a></li><li data-type='method'><a href="Server.Modules.AppEngine.app.html#.use">use</a></li></ul></li><li><a href="Server.Modules.AppEngine.app.models.html">models</a><ul class='methods'><li data-type='method'><a href="Server.Modules.AppEngine.app.models.html#.add">add</a></li><li data-type='method'><a href="Server.Modules.AppEngine.app.models.html#.get">get</a></li></ul></li><li><a href="Server.Modules.AppEngine.app.url.html">url</a><ul class='methods'><li data-type='method'><a href="Server.Modules.AppEngine.app.url.html#.get">get</a></li></ul></li><li><a href="Server.Modules.AppEngine.app.vars.html">vars</a><ul class='methods'><li data-type='method'><a href="Server.Modules.AppEngine.app.vars.html#.get">get</a></li><li data-type='method'><a href="Server.Modules.AppEngine.app.vars.html#.set">set</a></li></ul></li><li><a href="Server.Modules.CLI.html">CLI</a><ul class='methods'><li data-type='method'><a href="Server.Modules.CLI.html#.register">register</a></li></ul></li><li><a href="Server.Modules.Configure.html">Configure</a></li><li><a href="Server.Modules.Core.html">Core</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Core.html#.cfg">cfg</a></li><li data-type='method'><a href="Server.Modules.Core.html#.fetchBasePath">fetchBasePath</a></li><li data-type='method'><a href="Server.Modules.Core.html#.getCoreProxy">getCoreProxy</a></li><li data-type='method'><a href="Server.Modules.Core.html#.init">init</a></li><li data-type='method'><a href="Server.Modules.Core.html#.module">module</a></li><li data-type='method'><a href="Server.Modules.Core.html#.pkg">pkg</a></li><li data-type='method'><a href="Server.Modules.Core.html#.ready">ready</a></li><li data-type='method'><a href="Server.Modules.Core.html#.shutdown">shutdown</a></li><li data-type='method'><a href="Server.Modules.Core.html#.void">void</a></li></ul></li><li><a href="Server.Modules.Core.Base.html">Base</a></li><li><a href="Server.Modules.Core.CoreProxy.html">CoreProxy</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Core.CoreProxy.html#.cfg">cfg</a></li><li data-type='method'><a href="Server.Modules.Core.CoreProxy.html#.fetchBasePath">fetchBasePath</a></li><li data-type='method'><a href="Server.Modules.Core.CoreProxy.html#.module">module</a></li><li data-type='method'><a href="Server.Modules.Core.CoreProxy.html#.pkg">pkg</a></li><li data-type='method'><a href="Server.Modules.Core.CoreProxy.html#.shutdown">shutdown</a></li></ul></li><li><a href="Server.Modules.Core.Interface.html">Interface</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Core.Interface.html#.get">get</a></li><li data-type='method'><a href="Server.Modules.Core.Interface.html#.list">list</a></li></ul></li><li><a href="Server.Modules.Core.Module.html">Module</a></li><li><a href="Server.Modules.Daemon.html">Daemon</a></li><li><a href="Server.Modules.DataAccess.html">DataAccess</a></li><li><a href="Server.Modules.ErrorHandler.html">ErrorHandler</a></li><li><a href="Server.Modules.Farm.html">Farm</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Farm.html#.get">get</a></li><li data-type='method'><a href="Server.Modules.Farm.html#.isJobServer">isJobServer</a></li><li data-type='method'><a href="Server.Modules.Farm.html#.set">set</a></li><li data-type='method'><a href="Server.Modules.Farm.html#.updateListener">updateListener</a></li></ul></li><li><a href="Server.Modules.Generator.html">Generator</a></li><li><a href="Server.Modules.i18n.html">i18n</a><ul class='methods'><li data-type='method'><a href="Server.Modules.i18n.html#.addResource">addResource</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.addResourceBundle">addResourceBundle</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.addResources">addResources</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.changeLanguage">changeLanguage</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.cloneInstance">cloneInstance</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.createAppInstances">createAppInstances</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.createInstance">createInstance</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.dir">dir</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.exists">exists</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.format">format</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.getDataByLanguage">getDataByLanguage</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.getFixedT">getFixedT</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.getResource">getResource</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.getResourceBundle">getResourceBundle</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.hasResourceBundle">hasResourceBundle</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.init">init</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.loadLanguages">loadLanguages</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.loadNamespaces">loadNamespaces</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.off">off</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.on">on</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.reloadResources">reloadResources</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.removeResourceBundle">removeResourceBundle</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.setDefaultNamespace">setDefaultNamespace</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.t">t</a></li><li data-type='method'><a href="Server.Modules.i18n.html#.use">use</a></li></ul></li><li><a href="Server.Modules.Installer.html">Installer</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Installer.html#.details">details</a></li><li data-type='method'><a href="Server.Modules.Installer.html#.download">download</a></li><li data-type='method'><a href="Server.Modules.Installer.html#.install">install</a></li><li data-type='method'><a href="Server.Modules.Installer.html#.list">list</a></li><li data-type='method'><a href="Server.Modules.Installer.html#.remove">remove</a></li><li data-type='method'><a href="Server.Modules.Installer.html#.switchRegistry">switchRegistry</a></li></ul></li><li><a href="Server.Modules.Jobs.html">Jobs</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Jobs.html#.add">add</a></li><li data-type='method'><a href="Server.Modules.Jobs.html#.remove">remove</a></li></ul></li><li><a href="Server.Modules.Logger.html">Logger</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Logger.html#.getLatestHeartbeat">getLatestHeartbeat</a></li><li data-type='method'><a href="Server.Modules.Logger.html#.log">log</a></li></ul></li><li><a href="Server.Modules.Router.html">Router</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Router.html#.count">count</a></li><li data-type='method'><a href="Server.Modules.Router.html#.get">get</a></li><li data-type='method'><a href="Server.Modules.Router.html#.list">list</a></li><li data-type='method'><a href="Server.Modules.Router.html#.new">new</a></li></ul></li><li><a href="Server.Modules.Router.router.html">router</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Router.router.html#.incoming">incoming</a></li><li data-type='method'><a href="Server.Modules.Router.router.html#.route">route</a></li></ul></li><li><a href="Server.Modules.Sandbox.html">Sandbox</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Sandbox.html#.execute">execute</a></li></ul></li><li><a href="Server.Modules.Utilities.html">Utilities</a><ul class='methods'><li data-type='method'><a href="Server.Modules.Utilities.html#.cloneObject">cloneObject</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.decrypt">decrypt</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.encrypt">encrypt</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.getCpuLoad">getCpuLoad</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.getCurrentDateInISO">getCurrentDateInISO</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.getEndTime">getEndTime</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.getMemoryUse">getMemoryUse</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.getObjectMemoryUsage">getObjectMemoryUsage</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.getStartTime">getStartTime</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.isJSON">isJSON</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.isNil">isNil</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.isNull">isNull</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.isUndefined">isUndefined</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.loadModule">loadModule</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.objectLength">objectLength</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.parseCsv">parseCsv</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.path">path</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.prop">prop</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.prop">prop</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.randomString">randomString</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.uuid4">uuid4</a></li><li data-type='method'><a href="Server.Modules.Utilities.html#.validateString">validateString</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="Server.Modules.ErrorHandler.html#event:errorthrown">errorthrown</a></li><li><a href="Server.Modules.ErrorHandler.html#~event:event:errorhandled">event:errorhandled</a></li></ul><h3>Namespaces</h3><ul><li><a href="Server.html">Server</a></li><li><a href="Server.Interfaces.html">Interfaces</a></li><li><a href="Server.Modules.html">Modules</a></li></ul></div>
</nav>

<div id="main">
    
    <h1 id='page-title' class="page-title">modules/farm/main.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>!function FarmModuleWrapper() {
  let core; let mod; let o = {}; const pipelines = function() {};

  /**
   * Blackrock Farm Module
   *
   * @public
   * @class Server.Modules.Farm
   * @augments Server.Modules.Core.Module
   * @param {Server.Modules.Core} coreObj - The Parent Core Object
   * @return {Server.Modules.Farm} module - The Farm Module
   *
   * @description This is the Farm Module of the Blackrock Application Server.
   * It provides distributed / cluster compute capabilities for the server,
   * allowing you to run multiple disparate instances of the server (that can
   * be geographically disbursed) in unison. It uses the Scuttlebutt Gossip
   * Protocol to share state across all nodes in the cluster.
   * PLEASE NOTE: This interface is undergoing development and
   * is not yet functional.
   *
   * @example
   * Tbc...
   *
   * @author Darren Smith
   * @copyright Copyright (c) 2021 Darren Smith
   * @license Licensed under the LGPL license.
   */
  module.exports = function FarmModule(coreObj) {
    if (mod) return mod;
    core = coreObj; mod = new core.Mod('Farm'); o.log = core.module('logger').log;
    o.farmServers = {}; o.utils = {}; o.jobServer = false;
    o.log('debug', 'Blackrock Farm > Initialising...', {module: mod.name}, 'MODULE_INIT');
    process.nextTick(function() {
      pipelines.init();
    });
    return mod;
  };


  /**
   * (Internal > Pipeline [1]) Init Pipeline
   *
   * @private
   * @memberof Server.Modules.Generator
   * @function registerWithCLI
   * @ignore
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.runInitPipeline = function FarmInitPipeline() {
    // noinspection JSUnresolvedFunction
    core.lib.rxPipeline({}).pipe(

        // Fires once on server initialisation:
        pipelines.init.loadScuttlebutt,
        pipelines.init.createModelAndServer,
        pipelines.init.persistToDisk,
        pipelines.init.setupUpdateListener,
        pipelines.init.connectToSeeds,
        pipelines.init.setupGetAndSetMethods,
        pipelines.init.setupIsJobServer,
        pipelines.init.setupEventEmitter,
        pipelines.init.setupUpdateRouter,
        pipelines.init.updateServerStatus,
        pipelines.init.inactivateStaleServers,
        pipelines.init.toggleLocalAsJobServer,
        pipelines.init.checkAndVoteOnJobServerRoles

    ).subscribe();
  };

  /**
   * (Internal > Stream Methods [1]) Load Scuttlebutt
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function loadScuttlebutt
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   * */
  pipelines.init.loadScuttlebutt = function FarmIPLLoadScuttlebutt(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLLoadScuttlebuttOp(observer, evt) {
      evt.lib = {
        sb: {
          Model: require('./_support/scuttlebutt/model'),
          Events: require('./_support/scuttlebutt/events'),
          Security: require('./_support/scuttlebutt/security'),
          ScuttleBucket: require('./_support/scuttlebucket'),
        },
        net: require('net'),
      };
      o.log('debug', 'Farm > [1] Loaded Scuttlebutt Libraries',
          {module: mod.name}, 'FARM_LOADED_SCUTTLEBUTT');
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [2]) Create Model And Server
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function createModelAndServer
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.createModelAndServer = function FarmIPLCreateModel(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLCreateModelOp(observer, evt) {
      o.log('debug', 'Blackrock Farm > [2] Attempting to create model and start server',
          {module: mod.name}, 'FARM_SERVER_STARTING');
      let farm;
      // noinspection JSUnresolvedVariable
      if (core.cfg().farm) {
        // noinspection JSUnresolvedVariable
        farm = core.cfg().farm;
      } else farm = {};
      let port;
      if (farm.server &amp;&amp; farm.server.port) port = farm.server.port;
      else port = 8000;
      o.utils.isPortTaken(port, function FarmIPLCreateModelPortTakenCb(err, result) {
        if (result !== false) {
          evt.serverNotStarted = true;
          o.log('error',
              'Farm > Cannot start Scuttlebutt as the defined port (' + port + ') is already in use',
              {module: mod.name}, 'FARM_SERVER_PORT_IN_USE');
          observer.next(evt);
          return;
        }
        const sl = evt.lib.sb;
        const create = function FarmIPLCreateModelCreateScuttleBucket() {
          return new sl.ScuttleBucket()
              .add('model', new sl.Model())
              .add('events', new sl.Events('evts'));
        };
        o.scuttleBucketInstance = create();
        evt.lib.net.createServer(function FarmIPLCreateModelCreateServerCb(stream) {
          const ms = o.scuttleBucketInstance.createStream();
          stream.pipe(ms).pipe(stream);
          ms.on('error', function FarmIPLCreateModelOnMSErr() {
            stream.destroy();
          });
          stream.on('error', function FarmIPLCreateModelOnStreamErr() {
            ms.destroy();
          });
        }).listen(port, function() {
          o.log('debug',
              'Farm > Created New Scuttlebutt Model + TCP Server Listening On Port ' + port,
              {module: mod.name}, 'FARM_SERVER_STARTED');
        });
        o.serverModel = o.scuttleBucketInstance.get('model');
        o.serverEmitter = o.scuttleBucketInstance.get('events');
        observer.next(evt);
      });
    }, source);
  };

  /**
   * (Internal > Stream Methods [3]) Persist To Disk (NOT WORKING)
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function persistToDisk
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.persistToDisk = function FarmIPLPersistToDisk(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLPersistToDiskOp(observer, evt) {
      o.log('debug', 'Farm > [3] Setting Up Disk Persistence...',
          {module: mod.name}, 'FARM_INIT_DISK_PERS');
      let farm;
      // noinspection JSUnresolvedVariable
      if (core.cfg().farm) {
        // noinspection JSUnresolvedVariable
        farm = core.cfg().farm;
      } else farm = {};
      let cache;
      if (farm.server &amp;&amp; farm.server.cache) cache = farm.server.cache;
      else cache = null;
      if (cache) {
        const file = core.fetchBasePath('cache') + '/' + cache;
        const fs = require('fs');
        if (!fs.existsSync(file)) fs.closeSync(fs.openSync(file, 'w'));
        fs.createReadStream(file).pipe(o.scuttleBucketInstance.createWriteStream());
        o.scuttleBucketInstance.on('sync', function FarmIPLPersistToDiskSyncCallback() {
          o.scuttleBucketInstance.createReadStream().pipe(fs.createWriteStream(file));
        });
      }
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [4]) Setup Update Listener
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function setupUpdateListener
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.setupUpdateListener = function FarmSetupUpdateListener(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmSetupUpdateListenerOp(observer, evt) {
      o.log('debug', 'Farm > [4] Setting Up Update Listener...',
          {module: mod.name}, 'FARM_INIT_UPDATE_LISTENER');
      /**
       * Update Listener
       *
       * @public
       * @memberof Server.Modules.Farm
       * @function updateListener
       * @param {function} fn - Callback For Listener
       * @return {*} result - Lookup Value
       *
       * @description
       * Tbc...
       *
       * @example
       * Tbc...
       */
      mod.updateListener = function FarmUpdateListener(fn) {
        return o.serverModel.on('update', fn);
      };
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [5]) Connect To Seed
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function connectToSeeds
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.connectToSeeds = function FarmIPLConnectToSeeds(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLConnectToSeedsOp(observer, evt) {
      o.log('debug', 'Farm > [5] Connecting To Seed Server...',
          {module: mod.name}, 'FARM_CONNECTING_TO_SEED_SERVER');
      const connectToSeed = function FarmModuleConnectToSeed(host, port) {
        const stream = evt.lib.net.connect(port);
        const ms = o.scuttleBucketInstance.createStream();
        stream.pipe(ms).pipe(stream);
      };
      if (evt.serverNotStarted) return evt;
      let farm;
      // noinspection JSUnresolvedVariable
      if (core.cfg().farm) {
        // noinspection JSUnresolvedVariable
        farm = core.cfg().farm;
      } else farm = {};
      // noinspection JSUnresolvedVariable
      if (farm.seeds) {
        for (let i = 0; i &lt; farm.seeds.length; i++) {
          const host = farm.seeds[i].split(':')[0];
          const port = farm.seeds[i].split(':')[1];
          connectToSeed(host, port);
        }
      }
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [6]) Setup "Get From Store" &amp; "Set Against Store" Methods
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function setupGetAndSetMethods
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.setupGetAndSetMethods = function FarmIPLSetupGetAndSetMethods(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLSetupGetAndSetMethodsOp(observer, evt) {
      o.log('debug', 'Farm > [6] Setting Up Model Get &amp; Set Methods...',
          {module: mod.name}, 'FARM_SETUP_MODEL_GET_SET');
      /**
       * Get Method
       *
       * @public
       * @memberof Server.Modules.Farm
       * @function get
       * @param {string} key - Lookup Key
       * @return {*} result - Lookup Value
       *
       * @description
       * Tbc...
       *
       * @example
       * Tbc...
       */
      mod.get = function FarmGetDataValue(key) {
        return o.serverModel.get(key);
      };
      /**
       * Set Method
       *
       * @public
       * @memberof Server.Modules.Farm
       * @function set
       * @param {string} key - Lookup Key
       * @param {*} value - Value to Set
       * @return {*} result - Result
       *
       * @description
       * Tbc...
       *
       * @example
       * Tbc...
       */
      mod.set = function FarmSetDataValue(key, value) {
        return o.serverModel.set(key, value);
      };
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [7]) Setup the "isJobServer()" Method
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function setupIsJobServer
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.setupIsJobServer = function FarmIPLSetupIsJobServer(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLSetupIsJobServerOp(observer, evt) {
      o.log('debug', 'Farm > [7] Setting Up \'isJobServer\' Method...',
          {module: mod.name}, 'FARM_SETUP_IS_JOB_SERVER_METHOD');
      /**
       * Is Job Server?
       *
       * @public
       * @memberof Server.Modules.Farm
       * @function isJobServer
       * @return {boolean} result - Is Job Server Result (True | False)
       *
       * @description
       * Tbc...
       *
       * @example
       * Tbc...
       */
      mod.isJobServer = function FarmIsJobServer() {
        return o.jobServer;
      };
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [8]) Setup Distributed Event Emitter
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function setupEventEmitter
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.setupEventEmitter = function FarmIPLSetupEventEmitter(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLSetupEventEmitterOp(observer, evt) {
      o.log('debug', 'Farm > [8] Setting Up Event Emitter...',
          {module: mod.name}, 'FARM_SETUP_EMITTER');
      mod.events = {
        emit: function FarmEventEmitterEmit(event, data) {
          return o.serverEmitter.emit(event, data);
        },
        on: function FarmEventEmitterOn(event, listener) {
          return o.serverEmitter.on(event, listener);
        },
        history: function FarmEventEmitterHistory(filter) {
          return o.serverEmitter.history(filter);
        },
      };
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [9]) Setup Update Router
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function setupUpdateRouter
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  pipelines.init.setupUpdateRouter = function FarmIPLSetupUpdateRouter(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLSetupUpdateRouterOp(observer, evt) {
      o.log('debug', 'Farm > [9] Setting Up The Update Router...',
          {module: mod.name}, 'FARM_SETUP_UPDATE_ROUTER');
      o.serverModel.on('update', function FarmIPLSetupUpdateRouterOnUpdate(f1) {
        let key = f1[0]; let val = f1[1];
        if (key.startsWith('servers')) {
          key = key.split('[');
          const serverUri = key[1].slice(0, -1);
          if (core.module('utilities').isJSON(val)) {
            val = JSON.parse(val);
            o.farmServers[serverUri] = val;
          }
        }
      });
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [10]) Setup Job to Update Server Status Every 2 Seconds
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function updateServerStatus
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * This method sets up a new job to fetch the latest heartbeat from the Logger module
   * AND to count the number of servers in the farm, and then to update the farm-wide property
   * for this server with the latest information from these sources. This job runs every 2 seconds.
   *
   * @example
   * Tbc...
   */
  pipelines.init.updateServerStatus = function FarmIPLUpdateServerStatus(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLUpdateServerStatusOp(observer, evt) {
      o.log('debug',
          'Farm > [10] Setting Up Job to Update Server Status With Latest Heartbeat...',
          {module: mod.name}, 'FARM_SETUP_HEARTBEAT_JOB');
      // noinspection JSUnresolvedVariable
      const dayjs = core.lib.dayjs;
      setInterval(function FarmUpdateServerStatusInt() {
        const latestHeartbeat = core.module('logger').getLatestHeartbeat();
        let serverCount = 0;
        for (const key in o.farmServers) {
          // noinspection JSUnfilteredForInLoop
          if (o.farmServers[key].status === 'active') serverCount++;
        }
        latestHeartbeat.peerCount = serverCount;
        core.module('logger').updateLatestHeartbeat('peerCount', latestHeartbeat.peerCount);
        const val = JSON.stringify({
          status: 'active',
          lastUpdated: dayjs().format(),
          heartbeat: latestHeartbeat,
        });
        // noinspection JSUnresolvedVariable
        mod.set('servers[127.0.0.1:' + core.cfg().farm.server.port + ']', val);
      }, 2000);
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [11]) Setup Job to Inactivate Stale Servers
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function inactivateStaleServers
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * This method sets up a local job that runs every 2 seconds. The job checks
   * the lastUpdated property against each server in the farm and if it was updated
   * more than 3 seconds ago, it's status will be updated within the farm-wide
   * properties to become "inactive"
   *
   * @example
   * Tbc...
   */
  pipelines.init.inactivateStaleServers = function FarmIPLInactivateStaleServers(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLInactivateStaleServersOp(observer, evt) {
      o.log('debug',
          'Farm > [11] Setting Up Job to Inactivate Stale Servers...',
          {module: mod.name}, 'FARM_SETUP_INACTIVATE_STALE_JOB');
      // noinspection JSUnresolvedVariable
      const dayjs = core.lib.dayjs;
      // noinspection JSUnfilteredForInLoop
      setInterval(function FarmIPLInactivateStaleServersInt() {
        const currentDateStamp = dayjs();
        // eslint-disable-next-line guard-for-in
        for (const server in o.farmServers) {
          // noinspection JSUnfilteredForInLoop
          const lastUpdated = dayjs(o.farmServers[server].lastUpdated);
          // noinspection JSUnfilteredForInLoop
          if (currentDateStamp.diff(lastUpdated) > 3000 &amp;&amp; o.farmServers[server].status === 'active') {
            const val = JSON.stringify({
              status: 'inactive',
              lastUpdated: dayjs().format(),
            });
            mod.set('servers[' + server + ']', val);
          }
        }
      }, 2000);
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [12]) Toggle Local Server as Job Server if Not In Farm
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function toggleLocalAsJobServer
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * This method waits 10 seconds following server boot to see whether it ends up joining
   * a server farm. If it does not, then the "Primary Job Server" Role is automatically
   * applied to this server. If it later joins a farm then it will relinquish this role.
   * If no other servers in the farm have this role then selection will be based on a vote.
   *
   * @example
   * Tbc...
   */
  pipelines.init.toggleLocalAsJobServer = function FarmIPLToggleAsJobServer(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLToggleAsJobServerOp(observer, evt) {
      let serverCount = 0;
      for (const key in o.farmServers) {
        // noinspection JSUnfilteredForInLoop
        if (o.farmServers[key].status === 'active') serverCount++;
      }
      if (serverCount &lt;= 1) {
        o.jobServer = true;
        o.log('debug',
            'Farm > [12] This stand-alone server has been toggled as the Primary Job Server',
            {module: mod.name}, 'FARM_IS_PRIMARY_JOB_SERVER');
      } else {
        o.log('debug',
            'Farm > [12] This server is part of a farm and ' +
            'may be allocated the Primary Job Server role in the future',
            {module: mod.name}, 'FARM_NOT_PRIMARY_JOB_SERVER');
      }
      observer.next(evt);
    }, source);
  };

  /**
   * (Internal > Stream Methods [13]) Check &amp; Vote On Job Server Roles
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function checkAndVoteOnJobServerRoles
   * @ignore
   * @param {observable} source - Source Observable
   * @return {observable} destination - Destination Observable
   *
   * @description
   * This method sets up a job that only runs where there is > 1 server in the farm
   * (ie; not for stand-alone servers). When run, the job checks the farm-wide
   * properties - "PrimaryJobServer" and "SecondaryJobServer". If either of
   * these servers are inactive or the properties are empty, then this server will publish
   * a vote event to the farm that votes for two servers from the farm to fill these roles.
   * Server selection is random. Upon all votes being submitted, this and all other servers
   * in the farm will tally up the votes. If an even number of votes were submitted,
   * the last vote is discarded. The servers that receive the most votes will automatically
   * assign themselves the corresponding role and will update the farm-wide property for
   * the role that they were allocated with a value of their server IP + port.
   *
   * @example
   * Tbc...
   */
  pipelines.init.checkAndVoteOnJobServerRoles = function FarmIPLCheckAndVoteOnJobServerRoles(source) {
    // noinspection JSUnresolvedFunction
    return core.lib.rxOperator(function FarmIPLCheckAndVoteOnJobServerRolesOp(observer, evt) {
      observer.next(evt);
    }, source);
  };


  /**
   * (Internal > Utilities) Checks if a port is already taken or in use
   *
   * @private
   * @memberof Server.Modules.Farm
   * @function utils.isPortTaken
   * @ignore
   * @param {number} port - The port number to check
   * @param {function} cb - Callback function
   *
   * @description
   * Tbc...
   *
   * @example
   * Tbc...
   */
  o.utils.isPortTaken = function FarmUtilsIsPortTaken(port, cb) {
    const tester = require('net').createServer()
        .once('error', function FarmUtilsIsPortTakenOnErr(err) {
          if (err.code !== 'EADDRINUSE') return cb(err);
          cb(null, true);
        })
        .once('listening', function FarmUtilsIsPortTakenOnListen() {
          tester.once('close', function FarmUtilsIsPortTakenOnClose() {
            cb(null, false);
          }).close();
        })
        .listen(port);
  };
}();
</code></pre>
        </article>
    </section>




</div>

<footer id="footer">
  (c) Copyright, Darren Smith 2021 (<a href="https://www.darrensmith.com.au">www.darrensmith.com.au</a>)
</footer>

<script src="scripts/third-party/prettify.js"></script>
<script src="scripts/third-party/lang-css.js"></script>
<script src="scripts/search.js"></script>
<script src="scripts/third-party/fuse.js"></script>
<script type="text/javascript" src="scripts/misc.js"></script>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/fix-code-block.js"></script>
<script>
  var list = [{"title":"advanced-routing","link":"advanced-routing"},{"title":"app-filesystem-structure","link":"app-filesystem-structure"},{"title":"getting-started","link":"getting-started"},{"title":"server-configuration","link":"server-configuration"},{"title":"Axon","link":"<a href=\"Server.Interfaces.Axon.html\">Axon</a>"},{"title":"HTTP","link":"<a href=\"Server.Interfaces.HTTP.html\">HTTP</a>"},{"title":"Client","link":"<a href=\"Server.Interfaces.HTTP.Client.html\">Client</a>"},{"title":"Server.Interfaces.HTTP.Client.delete","link":"<a href=\"Server.Interfaces.HTTP.Client.html#.delete\">Server.Interfaces.HTTP.Client.delete &rtrif; undefined</a>"},{"title":"Server.Interfaces.HTTP.Client.get","link":"<a href=\"Server.Interfaces.HTTP.Client.html#.get\">Server.Interfaces.HTTP.Client.get &rtrif; undefined</a>"},{"title":"Server.Interfaces.HTTP.Client.post","link":"<a href=\"Server.Interfaces.HTTP.Client.html#.post\">Server.Interfaces.HTTP.Client.post &rtrif; undefined</a>"},{"title":"Server.Interfaces.HTTP.Client.put","link":"<a href=\"Server.Interfaces.HTTP.Client.html#.put\">Server.Interfaces.HTTP.Client.put &rtrif; undefined</a>"},{"title":"Server.Interfaces.HTTP.Client.request","link":"<a href=\"Server.Interfaces.HTTP.Client.html#.request\">Server.Interfaces.HTTP.Client.request &rtrif; undefined</a>"},{"title":"Hook","link":"<a href=\"Server.Interfaces.HTTP.Hook.html\">Hook</a>"},{"title":"Server.Interfaces.HTTP.Hook.add","link":"<a href=\"Server.Interfaces.HTTP.Hook.html#.add\">Server.Interfaces.HTTP.Hook.add &rtrif; undefined</a>"},{"title":"Server.Interfaces.HTTP.Hook.remove","link":"<a href=\"Server.Interfaces.HTTP.Hook.html#.remove\">Server.Interfaces.HTTP.Hook.remove &rtrif; undefined</a>"},{"title":"NanoMSG","link":"<a href=\"Server.Interfaces.NanoMSG.html\">NanoMSG</a>"},{"title":"SSH","link":"<a href=\"Server.Interfaces.SSH.html\">SSH</a>"},{"title":"WebSockets","link":"<a href=\"Server.Interfaces.WebSockets.html\">WebSockets</a>"},{"title":"ZeroMQ","link":"<a href=\"Server.Interfaces.ZeroMQ.html\">ZeroMQ</a>"},{"title":"AppEngine","link":"<a href=\"Server.Modules.AppEngine.html\">AppEngine</a>"},{"title":"Server.Modules.AppEngine.appStats","link":"<a href=\"Server.Modules.AppEngine.html#.appStats\">Server.Modules.AppEngine.appStats &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.list","link":"<a href=\"Server.Modules.AppEngine.html#.list\">Server.Modules.AppEngine.list &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.load","link":"<a href=\"Server.Modules.AppEngine.html#.load\">Server.Modules.AppEngine.load &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.reloadApp","link":"<a href=\"Server.Modules.AppEngine.html#.reloadApp\">Server.Modules.AppEngine.reloadApp &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.search","link":"<a href=\"Server.Modules.AppEngine.html#.search\">Server.Modules.AppEngine.search &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.unloadApp","link":"<a href=\"Server.Modules.AppEngine.html#.unloadApp\">Server.Modules.AppEngine.unloadApp &rtrif; undefined</a>"},{"title":"app","link":"<a href=\"Server.Modules.AppEngine.app.html\">app</a>"},{"title":"Server.Modules.AppEngine.app.cfg","link":"<a href=\"Server.Modules.AppEngine.app.html#.cfg\">Server.Modules.AppEngine.app.cfg &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.app.loadController","link":"<a href=\"Server.Modules.AppEngine.app.html#.loadController\">Server.Modules.AppEngine.app.loadController &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.app.routes","link":"<a href=\"Server.Modules.AppEngine.app.html#.routes\">Server.Modules.AppEngine.app.routes &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.app.unloadController","link":"<a href=\"Server.Modules.AppEngine.app.html#.unloadController\">Server.Modules.AppEngine.app.unloadController &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.app.use","link":"<a href=\"Server.Modules.AppEngine.app.html#.use\">Server.Modules.AppEngine.app.use &rtrif; undefined</a>"},{"title":"models","link":"<a href=\"Server.Modules.AppEngine.app.models.html\">models</a>"},{"title":"Server.Modules.AppEngine.app.models.add","link":"<a href=\"Server.Modules.AppEngine.app.models.html#.add\">Server.Modules.AppEngine.app.models.add &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.app.models.get","link":"<a href=\"Server.Modules.AppEngine.app.models.html#.get\">Server.Modules.AppEngine.app.models.get &rtrif; undefined</a>"},{"title":"url","link":"<a href=\"Server.Modules.AppEngine.app.url.html\">url</a>"},{"title":"Server.Modules.AppEngine.app.url.get","link":"<a href=\"Server.Modules.AppEngine.app.url.html#.get\">Server.Modules.AppEngine.app.url.get &rtrif; undefined</a>"},{"title":"vars","link":"<a href=\"Server.Modules.AppEngine.app.vars.html\">vars</a>"},{"title":"Server.Modules.AppEngine.app.vars.get","link":"<a href=\"Server.Modules.AppEngine.app.vars.html#.get\">Server.Modules.AppEngine.app.vars.get &rtrif; undefined</a>"},{"title":"Server.Modules.AppEngine.app.vars.set","link":"<a href=\"Server.Modules.AppEngine.app.vars.html#.set\">Server.Modules.AppEngine.app.vars.set &rtrif; undefined</a>"},{"title":"CLI","link":"<a href=\"Server.Modules.CLI.html\">CLI</a>"},{"title":"Server.Modules.CLI.register","link":"<a href=\"Server.Modules.CLI.html#.register\">Server.Modules.CLI.register &rtrif; undefined</a>"},{"title":"Configure","link":"<a href=\"Server.Modules.Configure.html\">Configure</a>"},{"title":"Core","link":"<a href=\"Server.Modules.Core.html\">Core</a>"},{"title":"Server.Modules.Core.cfg","link":"<a href=\"Server.Modules.Core.html#.cfg\">Server.Modules.Core.cfg &rtrif; undefined</a>"},{"title":"Server.Modules.Core.fetchBasePath","link":"<a href=\"Server.Modules.Core.html#.fetchBasePath\">Server.Modules.Core.fetchBasePath &rtrif; undefined</a>"},{"title":"Server.Modules.Core.getCoreProxy","link":"<a href=\"Server.Modules.Core.html#.getCoreProxy\">Server.Modules.Core.getCoreProxy &rtrif; undefined</a>"},{"title":"Server.Modules.Core.init","link":"<a href=\"Server.Modules.Core.html#.init\">Server.Modules.Core.init &rtrif; undefined</a>"},{"title":"Server.Modules.Core.module","link":"<a href=\"Server.Modules.Core.html#.module\">Server.Modules.Core.module &rtrif; undefined</a>"},{"title":"Server.Modules.Core.pkg","link":"<a href=\"Server.Modules.Core.html#.pkg\">Server.Modules.Core.pkg &rtrif; undefined</a>"},{"title":"Server.Modules.Core.ready","link":"<a href=\"Server.Modules.Core.html#.ready\">Server.Modules.Core.ready &rtrif; undefined</a>"},{"title":"Server.Modules.Core.shutdown","link":"<a href=\"Server.Modules.Core.html#.shutdown\">Server.Modules.Core.shutdown &rtrif; undefined</a>"},{"title":"Server.Modules.Core.void","link":"<a href=\"Server.Modules.Core.html#.void\">Server.Modules.Core.void &rtrif; undefined</a>"},{"title":"Base","link":"<a href=\"Server.Modules.Core.Base.html\">Base</a>"},{"title":"CoreProxy","link":"<a href=\"Server.Modules.Core.CoreProxy.html\">CoreProxy</a>"},{"title":"Server.Modules.Core.CoreProxy.cfg","link":"<a href=\"Server.Modules.Core.CoreProxy.html#.cfg\">Server.Modules.Core.CoreProxy.cfg &rtrif; undefined</a>"},{"title":"Server.Modules.Core.CoreProxy.fetchBasePath","link":"<a href=\"Server.Modules.Core.CoreProxy.html#.fetchBasePath\">Server.Modules.Core.CoreProxy.fetchBasePath &rtrif; undefined</a>"},{"title":"Server.Modules.Core.CoreProxy.module","link":"<a href=\"Server.Modules.Core.CoreProxy.html#.module\">Server.Modules.Core.CoreProxy.module &rtrif; undefined</a>"},{"title":"Server.Modules.Core.CoreProxy.pkg","link":"<a href=\"Server.Modules.Core.CoreProxy.html#.pkg\">Server.Modules.Core.CoreProxy.pkg &rtrif; undefined</a>"},{"title":"Server.Modules.Core.CoreProxy.shutdown","link":"<a href=\"Server.Modules.Core.CoreProxy.html#.shutdown\">Server.Modules.Core.CoreProxy.shutdown &rtrif; undefined</a>"},{"title":"Interface","link":"<a href=\"Server.Modules.Core.Interface.html\">Interface</a>"},{"title":"Server.Modules.Core.Interface.get","link":"<a href=\"Server.Modules.Core.Interface.html#.get\">Server.Modules.Core.Interface.get &rtrif; undefined</a>"},{"title":"Server.Modules.Core.Interface.list","link":"<a href=\"Server.Modules.Core.Interface.html#.list\">Server.Modules.Core.Interface.list &rtrif; undefined</a>"},{"title":"Module","link":"<a href=\"Server.Modules.Core.Module.html\">Module</a>"},{"title":"Daemon","link":"<a href=\"Server.Modules.Daemon.html\">Daemon</a>"},{"title":"DataAccess","link":"<a href=\"Server.Modules.DataAccess.html\">DataAccess</a>"},{"title":"ErrorHandler","link":"<a href=\"Server.Modules.ErrorHandler.html\">ErrorHandler</a>"},{"title":"Farm","link":"<a href=\"Server.Modules.Farm.html\">Farm</a>"},{"title":"Server.Modules.Farm.get","link":"<a href=\"Server.Modules.Farm.html#.get\">Server.Modules.Farm.get &rtrif; undefined</a>"},{"title":"Server.Modules.Farm.isJobServer","link":"<a href=\"Server.Modules.Farm.html#.isJobServer\">Server.Modules.Farm.isJobServer &rtrif; undefined</a>"},{"title":"Server.Modules.Farm.set","link":"<a href=\"Server.Modules.Farm.html#.set\">Server.Modules.Farm.set &rtrif; undefined</a>"},{"title":"Server.Modules.Farm.updateListener","link":"<a href=\"Server.Modules.Farm.html#.updateListener\">Server.Modules.Farm.updateListener &rtrif; undefined</a>"},{"title":"Generator","link":"<a href=\"Server.Modules.Generator.html\">Generator</a>"},{"title":"i18n","link":"<a href=\"Server.Modules.i18n.html\">i18n</a>"},{"title":"Server.Modules.i18n.addResource","link":"<a href=\"Server.Modules.i18n.html#.addResource\">Server.Modules.i18n.addResource &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.addResourceBundle","link":"<a href=\"Server.Modules.i18n.html#.addResourceBundle\">Server.Modules.i18n.addResourceBundle &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.addResources","link":"<a href=\"Server.Modules.i18n.html#.addResources\">Server.Modules.i18n.addResources &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.changeLanguage","link":"<a href=\"Server.Modules.i18n.html#.changeLanguage\">Server.Modules.i18n.changeLanguage &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.cloneInstance","link":"<a href=\"Server.Modules.i18n.html#.cloneInstance\">Server.Modules.i18n.cloneInstance &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.createAppInstances","link":"<a href=\"Server.Modules.i18n.html#.createAppInstances\">Server.Modules.i18n.createAppInstances &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.createInstance","link":"<a href=\"Server.Modules.i18n.html#.createInstance\">Server.Modules.i18n.createInstance &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.dir","link":"<a href=\"Server.Modules.i18n.html#.dir\">Server.Modules.i18n.dir &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.exists","link":"<a href=\"Server.Modules.i18n.html#.exists\">Server.Modules.i18n.exists &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.format","link":"<a href=\"Server.Modules.i18n.html#.format\">Server.Modules.i18n.format &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.getDataByLanguage","link":"<a href=\"Server.Modules.i18n.html#.getDataByLanguage\">Server.Modules.i18n.getDataByLanguage &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.getFixedT","link":"<a href=\"Server.Modules.i18n.html#.getFixedT\">Server.Modules.i18n.getFixedT &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.getResource","link":"<a href=\"Server.Modules.i18n.html#.getResource\">Server.Modules.i18n.getResource &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.getResourceBundle","link":"<a href=\"Server.Modules.i18n.html#.getResourceBundle\">Server.Modules.i18n.getResourceBundle &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.hasResourceBundle","link":"<a href=\"Server.Modules.i18n.html#.hasResourceBundle\">Server.Modules.i18n.hasResourceBundle &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.init","link":"<a href=\"Server.Modules.i18n.html#.init\">Server.Modules.i18n.init &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.loadLanguages","link":"<a href=\"Server.Modules.i18n.html#.loadLanguages\">Server.Modules.i18n.loadLanguages &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.loadNamespaces","link":"<a href=\"Server.Modules.i18n.html#.loadNamespaces\">Server.Modules.i18n.loadNamespaces &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.off","link":"<a href=\"Server.Modules.i18n.html#.off\">Server.Modules.i18n.off &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.on","link":"<a href=\"Server.Modules.i18n.html#.on\">Server.Modules.i18n.on &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.reloadResources","link":"<a href=\"Server.Modules.i18n.html#.reloadResources\">Server.Modules.i18n.reloadResources &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.removeResourceBundle","link":"<a href=\"Server.Modules.i18n.html#.removeResourceBundle\">Server.Modules.i18n.removeResourceBundle &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.setDefaultNamespace","link":"<a href=\"Server.Modules.i18n.html#.setDefaultNamespace\">Server.Modules.i18n.setDefaultNamespace &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.t","link":"<a href=\"Server.Modules.i18n.html#.t\">Server.Modules.i18n.t &rtrif; undefined</a>"},{"title":"Server.Modules.i18n.use","link":"<a href=\"Server.Modules.i18n.html#.use\">Server.Modules.i18n.use &rtrif; undefined</a>"},{"title":"Installer","link":"<a href=\"Server.Modules.Installer.html\">Installer</a>"},{"title":"Server.Modules.Installer.details","link":"<a href=\"Server.Modules.Installer.html#.details\">Server.Modules.Installer.details &rtrif; undefined</a>"},{"title":"Server.Modules.Installer.download","link":"<a href=\"Server.Modules.Installer.html#.download\">Server.Modules.Installer.download &rtrif; undefined</a>"},{"title":"Server.Modules.Installer.install","link":"<a href=\"Server.Modules.Installer.html#.install\">Server.Modules.Installer.install &rtrif; undefined</a>"},{"title":"Server.Modules.Installer.list","link":"<a href=\"Server.Modules.Installer.html#.list\">Server.Modules.Installer.list &rtrif; undefined</a>"},{"title":"Server.Modules.Installer.remove","link":"<a href=\"Server.Modules.Installer.html#.remove\">Server.Modules.Installer.remove &rtrif; undefined</a>"},{"title":"Server.Modules.Installer.switchRegistry","link":"<a href=\"Server.Modules.Installer.html#.switchRegistry\">Server.Modules.Installer.switchRegistry &rtrif; undefined</a>"},{"title":"Jobs","link":"<a href=\"Server.Modules.Jobs.html\">Jobs</a>"},{"title":"Server.Modules.Jobs.add","link":"<a href=\"Server.Modules.Jobs.html#.add\">Server.Modules.Jobs.add &rtrif; undefined</a>"},{"title":"Server.Modules.Jobs.remove","link":"<a href=\"Server.Modules.Jobs.html#.remove\">Server.Modules.Jobs.remove &rtrif; undefined</a>"},{"title":"Logger","link":"<a href=\"Server.Modules.Logger.html\">Logger</a>"},{"title":"Server.Modules.Logger.getLatestHeartbeat","link":"<a href=\"Server.Modules.Logger.html#.getLatestHeartbeat\">Server.Modules.Logger.getLatestHeartbeat &rtrif; undefined</a>"},{"title":"Server.Modules.Logger.log","link":"<a href=\"Server.Modules.Logger.html#.log\">Server.Modules.Logger.log &rtrif; undefined</a>"},{"title":"Router","link":"<a href=\"Server.Modules.Router.html\">Router</a>"},{"title":"Server.Modules.Router.count","link":"<a href=\"Server.Modules.Router.html#.count\">Server.Modules.Router.count &rtrif; undefined</a>"},{"title":"Server.Modules.Router.get","link":"<a href=\"Server.Modules.Router.html#.get\">Server.Modules.Router.get &rtrif; undefined</a>"},{"title":"Server.Modules.Router.list","link":"<a href=\"Server.Modules.Router.html#.list\">Server.Modules.Router.list &rtrif; undefined</a>"},{"title":"Server.Modules.Router.new","link":"<a href=\"Server.Modules.Router.html#.new\">Server.Modules.Router.new &rtrif; undefined</a>"},{"title":"router","link":"<a href=\"Server.Modules.Router.router.html\">router</a>"},{"title":"Server.Modules.Router.router.incoming","link":"<a href=\"Server.Modules.Router.router.html#.incoming\">Server.Modules.Router.router.incoming &rtrif; undefined</a>"},{"title":"Server.Modules.Router.router.route","link":"<a href=\"Server.Modules.Router.router.html#.route\">Server.Modules.Router.router.route &rtrif; undefined</a>"},{"title":"Sandbox","link":"<a href=\"Server.Modules.Sandbox.html\">Sandbox</a>"},{"title":"Server.Modules.Sandbox.execute","link":"<a href=\"Server.Modules.Sandbox.html#.execute\">Server.Modules.Sandbox.execute &rtrif; undefined</a>"},{"title":"Utilities","link":"<a href=\"Server.Modules.Utilities.html\">Utilities</a>"},{"title":"Server.Modules.Utilities.cloneObject","link":"<a href=\"Server.Modules.Utilities.html#.cloneObject\">Server.Modules.Utilities.cloneObject &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.decrypt","link":"<a href=\"Server.Modules.Utilities.html#.decrypt\">Server.Modules.Utilities.decrypt &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.encrypt","link":"<a href=\"Server.Modules.Utilities.html#.encrypt\">Server.Modules.Utilities.encrypt &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.getCpuLoad","link":"<a href=\"Server.Modules.Utilities.html#.getCpuLoad\">Server.Modules.Utilities.getCpuLoad &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.getCurrentDateInISO","link":"<a href=\"Server.Modules.Utilities.html#.getCurrentDateInISO\">Server.Modules.Utilities.getCurrentDateInISO &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.getEndTime","link":"<a href=\"Server.Modules.Utilities.html#.getEndTime\">Server.Modules.Utilities.getEndTime &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.getMemoryUse","link":"<a href=\"Server.Modules.Utilities.html#.getMemoryUse\">Server.Modules.Utilities.getMemoryUse &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.getObjectMemoryUsage","link":"<a href=\"Server.Modules.Utilities.html#.getObjectMemoryUsage\">Server.Modules.Utilities.getObjectMemoryUsage &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.getStartTime","link":"<a href=\"Server.Modules.Utilities.html#.getStartTime\">Server.Modules.Utilities.getStartTime &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.isJSON","link":"<a href=\"Server.Modules.Utilities.html#.isJSON\">Server.Modules.Utilities.isJSON &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.isNil","link":"<a href=\"Server.Modules.Utilities.html#.isNil\">Server.Modules.Utilities.isNil &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.isNull","link":"<a href=\"Server.Modules.Utilities.html#.isNull\">Server.Modules.Utilities.isNull &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.isUndefined","link":"<a href=\"Server.Modules.Utilities.html#.isUndefined\">Server.Modules.Utilities.isUndefined &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.loadModule","link":"<a href=\"Server.Modules.Utilities.html#.loadModule\">Server.Modules.Utilities.loadModule &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.objectLength","link":"<a href=\"Server.Modules.Utilities.html#.objectLength\">Server.Modules.Utilities.objectLength &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.parseCsv","link":"<a href=\"Server.Modules.Utilities.html#.parseCsv\">Server.Modules.Utilities.parseCsv &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.path","link":"<a href=\"Server.Modules.Utilities.html#.path\">Server.Modules.Utilities.path &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.prop","link":"<a href=\"Server.Modules.Utilities.html#.prop\">Server.Modules.Utilities.prop &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.prop","link":"<a href=\"Server.Modules.Utilities.html#.prop\">Server.Modules.Utilities.prop &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.randomString","link":"<a href=\"Server.Modules.Utilities.html#.randomString\">Server.Modules.Utilities.randomString &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.uuid4","link":"<a href=\"Server.Modules.Utilities.html#.uuid4\">Server.Modules.Utilities.uuid4 &rtrif; undefined</a>"},{"title":"Server.Modules.Utilities.validateString","link":"<a href=\"Server.Modules.Utilities.html#.validateString\">Server.Modules.Utilities.validateString &rtrif; undefined</a>"},{"title":"errorthrown","link":"<a href=\"Server.Modules.ErrorHandler.html#event:errorthrown\">errorthrown</a>"},{"title":"event:errorhandled","link":"<a href=\"Server.Modules.ErrorHandler.html#~event:event:errorhandled\">event:errorhandled</a>"},{"title":"Server","link":"<a href=\"Server.html\">Server</a>"},{"title":"Interfaces","link":"<a href=\"Server.Interfaces.html\">Interfaces</a>"},{"title":"Modules","link":"<a href=\"Server.Modules.html\">Modules</a>"}];
  var options = 
  setupSearch(list, options)
</script>

 






</body>
</html>
